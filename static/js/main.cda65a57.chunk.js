(this["webpackJsonprpg-character-front"]=this["webpackJsonprpg-character-front"]||[]).push([[0],{45:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(37),c=n.n(r),i=(n(45),n(19)),o=n(4),l=n(5),h=n(7),u=n(6),d=n(18),j=n.n(d),b=n(14),g=n(3),O=n(40),p=n(2),m=n(22),x=n.n(m),f=n(76),v=n(77),C=n(78),y=n(79),S=n(80),I=n(81),k=n(82),L=n(83),_=n(84),w=n(85),N=n(0),R=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e="https://roweeena.github.io/project2",t="RPG Character Creator";return Object(N.jsx)("div",{children:Object(N.jsxs)("div",{className:"home",children:[Object(N.jsxs)("h2",{children:[this.props.name,")"]}),Object(N.jsx)("img",{src:"https://via.placeholder.com/400",alt:"Finished product"}),Object(N.jsx)("h5",{children:"Share your avatar"}),Object(N.jsxs)("div",{className:"socials",children:[Object(N.jsx)(f.a,{url:e,quote:t,children:Object(N.jsx)(v.a,{size:32})}),Object(N.jsx)(C.a,{url:e,title:t,children:Object(N.jsx)(y.a,{size:32})}),Object(N.jsx)(S.a,{url:e,children:Object(N.jsx)(I.a,{size:32})}),Object(N.jsx)(k.a,{url:e,title:t,children:Object(N.jsx)(L.a,{size:32})}),Object(N.jsx)(_.a,{url:e,title:t,children:Object(N.jsx)(w.a,{size:32})})]})]})})}}]),n}(a.Component),A=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={items:[],itemsId:e.itemId,itemsList:{},categoryNames:[],subCategoryNames:[],selectedCategory:"",selectedSubcategory:""},a.itemRendering=a.itemRendering.bind(Object(p.a)(a)),a.getCategories=a.getCategories.bind(Object(p.a)(a)),a.getSubCategories=a.getSubCategories.bind(Object(p.a)(a)),a._handleChange=a._handleChange.bind(Object(p.a)(a)),a._handleSubChange=a._handleSubChange.bind(Object(p.a)(a)),a._handleClear=a._handleClear.bind(Object(p.a)(a)),a.share=a.share.bind(Object(p.a)(a)),a.setAvatarItems=a.setAvatarItems.bind(Object(p.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t={};j.a.get("https://maplestory.io/api/GMS/224/item/category/equip").then((function(n){t=n.data;var a=x.a.mapValues(x.a.groupBy(t,(function(e){return e.typeInfo.category})),(function(e){return x.a.groupBy(e,(function(e){return e.typeInfo.subCategory}))}));e.getCategories(a),e.setState({itemsList:a})}))}},{key:"itemRendering",value:function(e,t,n){var a=this;if(Object.keys(e).length)return e[t][n].slice(0,100).map((function(e){return Object(N.jsxs)("a",{href:"",children:[Object(N.jsx)("img",{src:a.characterURL(e.id),alt:"Maplestory item",onClick:function(t){a.setAvatarItems(t,e.id)}},a.characterURL(e.id))," "]},e.id)}))}},{key:"urlGenerator",value:function(e){var t=this,n=[];return e.map((function(e){n.push("".concat(t.state))})),console.log(n.join(",")),n.join(",")}},{key:"characterURL",value:function(e){return"https://maplestory.io/api/GMS/224/item/".concat(e,"/icon")}},{key:"setAvatarItems",value:function(e,t){e.preventDefault(),console.log("HEY FROM setAvatarItems",e,t),this.setState({items:t}),this.props.avatarItems(t)}},{key:"getCategories",value:function(e){var t=Object.keys(e);console.log("Some categories",t),this.setState({categoryNames:t})}},{key:"getSubCategories",value:function(e){console.log("s",e),console.log("subcategory ItemsList",this.state.itemsList),this.setState({subCategoryNames:Object.keys(this.state.itemsList[e])}),console.log("getSubCategories",Object.keys(this.state.itemsList[e]))}},{key:"_handleChange",value:function(e){var t=this;console.log("items list",this.state.itemsList),this.setState({selectedSubcategory:""}),this.setState({selectedCategory:e.target.value},(function(){t.getSubCategories(t.state.selectedCategory)}))}},{key:"_handleSubChange",value:function(e){this.setState({selectedSubcategory:e.target.value}),console.log("_handleSubChange")}},{key:"_handleSave",value:function(){console.log("save")}},{key:"_handleClear",value:function(){this.props.handleClear()}},{key:"share",value:function(e){e.preventDefault(),this.props.history.push("/finished")}},{key:"render",value:function(){return Object(N.jsx)("div",{className:"item-select",children:Object(N.jsxs)("aside",{children:[Object(N.jsx)("h4",{children:"Make a selection:"}),Object(N.jsxs)("select",{onChange:this._handleChange,defaultValue:"",children:[Object(N.jsx)("option",{value:"",disabled:!0,children:" "}),this.state.categoryNames.map((function(e,t){return Object(N.jsxs)("option",{value:e,defaultValue:0===t,children:[e," "]},e)}))]}),Object(N.jsxs)("select",{onChange:this._handleSubChange,defaultValue:"",children:[Object(N.jsx)("option",{value:""}),this.state.subCategoryNames.map((function(e){return Object(N.jsxs)("option",{value:e,children:[e," "]},e)}))]}),Object(N.jsx)("div",{className:"items-render",children:this.state.selectedCategory&&this.state.selectedSubcategory?this.itemRendering(this.state.itemsList,this.state.selectedCategory,this.state.selectedSubcategory):null}),Object(N.jsxs)("div",{className:"studioButtons",children:[Object(N.jsx)("button",{onClick:this._handleSave,children:" Save "}),Object(N.jsx)("button",{onClick:this._handleClear,children:" Clear "}),Object(N.jsx)("button",{onClick:this.share,children:" Share "})]})]})})}}]),n}(a.Component),E=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e))._handleItemIds=function(e){a.setState({itemId:[].concat(Object(O.a)(a.state.itemId),[e])}),console.log("_handleItemIds",a.state.itemId)},a.state={isLoggedIn:!1,name:"",class:"",catchphrase:"",itemId:[],img:""},a.characterURL=a.characterURL.bind(Object(p.a)(a)),a._handleClear=a._handleClear.bind(Object(p.a)(a)),a}return Object(l.a)(n,[{key:"urlGenerator",value:function(e){var t=[];return e.map((function(e){t.push("{'itemId':".concat(e,",'version':'224'}"))})),console.log(t.join(",")),t.join(",")}},{key:"characterURL",value:function(e,t){return"https://maplestory.io/api/character/".concat(e,"/stand1/0?showears=false&showLefEars=false&showHighLefEars=undefined&resize=1&name=&flipX=false&bgColor=0,0,0,0")}},{key:"_handleClear",value:function(e){this.setState({itemId:[]})}},{key:"render",value:function(){return this.props.isLoggedIn?Object(N.jsx)("div",{children:Object(N.jsxs)("div",{className:"home",id:"create",children:[Object(N.jsxs)("h5",{children:[" ",this.props.name]}),Object(N.jsx)("div",{className:"studio",children:Object(N.jsx)("img",{src:this.characterURL(this.urlGenerator(x.a.flatten([2e3,12e3,this.state.itemId]))),alt:"character image"})}),Object(N.jsx)(A,{avatarItems:this._handleItemIds,itemId:this.state.itemId,handleClear:this._handleClear})]})}):Object(N.jsx)("div",{children:Object(N.jsx)("h3",{children:"You don't have access to this page. Please log in or sign up to start creating your character."})})}}]),n}(a.Component),M=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(N.jsxs)("div",{id:"enter",children:[Object(N.jsx)("img",{src:"https://i.pinimg.com/originals/ec/f9/c5/ecf9c521d2ca6970e9d13e25505fd95d.gif",height:"100px",alt:""}),Object(N.jsx)(b.b,{to:"/login",children:Object(N.jsx)("button",{children:"Enter"})})]})}}]),n}(a.Component),D=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).getInfo=function(e){a.setState({name:e})},a.state={isLoggedIn:!1,name:"",class:"",catchphrase:""},a._handleSubmit=a._handleSubmit.bind(Object(p.a)(a)),a._renderName=a._renderName.bind(Object(p.a)(a)),a._renderClass=a._renderClass.bind(Object(p.a)(a)),a._renderCatchphrase=a._renderCatchphrase.bind(Object(p.a)(a)),a.getInfo=a.getInfo.bind(Object(p.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getInfo()}},{key:"_renderName",value:function(e){this.setState({name:e.target.value})}},{key:"_renderClass",value:function(e){this.setState({class:e.target.value})}},{key:"_renderCatchphrase",value:function(e){this.setState({catchphrase:e.target.value})}},{key:"_handleSubmit",value:function(e){e.preventDefault(),this.props.getInfo(this.state.name),console.log("this.props.getInfo(this.state.name)"),this.setState({name:"",catchprase:"",class:""}),this.props.history.push("/create")}},{key:"render",value:function(){return Object(N.jsxs)("div",{children:[Object(N.jsx)("br",{}),Object(N.jsx)("div",{className:"enter",children:Object(N.jsxs)("div",{className:"form",children:[Object(N.jsx)("h3",{children:"Welcome!"}),Object(N.jsx)("p",{children:Object(N.jsx)("small",{children:"Type in your character name, class and a catchprase! "})}),Object(N.jsxs)("form",{onSubmit:this._handleSubmit,children:["Name:",Object(N.jsx)("input",{type:"text",onChange:this._renderName,value:this.state.name,required:!0}),Object(N.jsx)("br",{}),"Class: ",Object(N.jsxs)("select",{onChange:this._renderClass,value:this.state.class,children:[Object(N.jsx)("option",{value:"Choose an option"}),Object(N.jsx)("option",{value:"magician",children:"Magician"}),Object(N.jsx)("option",{value:"thief",children:"Thief"}),Object(N.jsx)("option",{value:"warrior",children:"Warrior"}),Object(N.jsx)("option",{value:"bowman",children:"Bowman"}),Object(N.jsx)("option",{value:"pirate",children:"Pirate"})]}),Object(N.jsx)("br",{}),"Catchphrase:",Object(N.jsx)("input",{type:"text",onChange:this._renderCatchphrase,value:this.state.catchphrase}),Object(N.jsx)("br",{}),Object(N.jsx)("button",{type:"submit",children:"START"})]})]})})]})}}]),n}(a.Component),U=n(21),P=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(U.a)({},n,s))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n={username:t.username,email:t.email,password:t.password,password_confirmation:t.password_confirmation};j.a.post("https://rpg-generator-backend.herokuapp.com/users",{user:n},{withCredentials:!0}).then((function(e){"created"===e.data.status?(a.props.handleLogin(e.data),a.redirect()):a.setState({errors:e.data.errors})})).catch((function(e){return console.log("api errors:",e)}))},a.redirect=function(){a.props.history.push("/enter")},a.handleErrors=function(){return Object(N.jsx)("div",{children:Object(N.jsx)("ul",{children:a.state.errors.map((function(e){return Object(N.jsx)("li",{children:e},e)}))})})},a.state={username:"",email:"",password:"",password_confirmation:"",errors:""},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.email,a=e.password,s=e.password_confirmation;return Object(N.jsxs)("div",{className:"home",children:[Object(N.jsx)("h3",{children:"Sign Up"}),Object(N.jsxs)("form",{onSubmit:this.handleSubmit,children:["Name: ",Object(N.jsx)("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),Object(N.jsx)("br",{}),"Email:",Object(N.jsx)("input",{type:"text",name:"email",value:n,onChange:this.handleChange}),Object(N.jsx)("br",{}),"Password:",Object(N.jsx)("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),Object(N.jsx)("br",{}),"Confirm password:",Object(N.jsx)("input",{type:"password",name:"password_confirmation",value:s,onChange:this.handleChange}),Object(N.jsx)("br",{}),Object(N.jsx)("button",{placeholder:"submit",type:"submit",children:"Sign Up"})]}),Object(N.jsx)("div",{children:this.state.errors?this.handleErrors():null})]})}}]),n}(a.Component),G=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(U.a)({},n,s))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n={email:t.email,password:t.password};j.a.post("https://rpg-generator-backend.herokuapp.com/login",{user:n},{withCredentials:!0}).then((function(e){e.data.logged_in?(a.props.handleLogin(e.data),a.redirect()):a.setState({errors:e.data.errors})})).catch((function(e){return console.log("api errors:",e)}))},a.redirect=function(){a.props.history.push("/enter")},a.handleErrors=function(){return Object(N.jsx)("div",{children:Object(N.jsx)("ul",{children:a.state.errors.map((function(e){return Object(N.jsx)("li",{children:e},e)}))})})},a.state={email:"",password:"",errors:""},a.getAccount=a.getAccount.bind(Object(p.a)(a)),a}return Object(l.a)(n,[{key:"componentWillMount",value:function(){return this.getAccount(),this.props.loggedInStatus?this.redirect():null}},{key:"getAccount",value:function(e){this.setState({email:e})}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return Object(N.jsxs)("div",{className:"home",children:[Object(N.jsx)("h3",{children:"Log In"}),Object(N.jsx)("div",{className:"form",children:Object(N.jsxs)("form",{onSubmit:this.handleSubmit,children:["Email: ",Object(N.jsx)("input",{type:"text",name:"email",value:t,onChange:this.handleChange}),Object(N.jsx)("br",{}),"Password:",Object(N.jsx)("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),Object(N.jsx)("br",{}),Object(N.jsx)("button",{placeholder:"submit",type:"submit",children:"Log In"}),Object(N.jsx)("div",{children:Object(N.jsx)("p",{children:Object(N.jsxs)("small",{children:["Don't have an account? ",Object(N.jsx)(b.b,{to:"/signup",children:" Sign up"})]})})})]})}),Object(N.jsx)("div",{children:this.state.errors?this.handleErrors():null})]})}}]),n}(a.Component),T=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(N.jsx)("div",{children:Object(N.jsx)("h3",{children:"Thank you for visiting!"})})}}]),n}(a.Component),z=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={username:"",email:""},a}return Object(l.a)(n,[{key:"render",value:function(){return Object(N.jsxs)("div",{className:"home",children:["Your account",Object(N.jsxs)("div",{className:"account",children:[Object(N.jsxs)("p",{children:["Name: ",Object(N.jsx)("small",{children:this.props.user&&this.props.user.username})]}),Object(N.jsxs)("p",{children:["Email: ",Object(N.jsxs)("small",{children:[" ",this.props.user&&this.props.user.email]})]}),Object(N.jsx)("p",{children:"Saved characters:"}),Object(N.jsx)("div",{})]})]})}}]),n}(a.Component),B=n(9),F=Object(B.a)(),V=(n(73),function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).getInfo=function(e){a.setState({name:e})},a.handleClick=function(){j.a.delete("https://rpg-generator-backend.herokuapp.com/logout",{withCredentials:!0}).then((function(e){a.handleLogout(),a.history.push("/")})).catch((function(e){return console.log(e)}))},a.loginStatus=function(){j.a.get("https://rpg-generator-backend.herokuapp.com/logged_in",{withCredentials:!0}).then((function(e){e.data.logged_in?a.handleLogin(e):a.handleLogout()})).catch((function(e){return console.log("api errors:",e)}))},a.handleLogin=function(e){a.setState({isLoggedIn:!0,user:e.user})},a.handleLogout=function(){a.setState({isLoggedIn:!1,user:{}})},a.state={isLoggedIn:!1,user:{},name:"",class:"",catchphrase:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loginStatus()}},{key:"render",value:function(){var e=this;return Object(N.jsx)("div",{children:Object(N.jsxs)(b.a,{history:F,children:[Object(N.jsx)("nav",{children:Object(N.jsxs)("ul",{children:[Object(N.jsx)("li",{children:Object(N.jsx)(b.b,{to:"/",children:" Home |"})}),Object(N.jsx)("li",{children:this.state.isLoggedIn?Object(N.jsx)(b.b,{to:"/create",children:"Create |"}):null}),Object(N.jsx)("li",{children:this.state.isLoggedIn?null:Object(N.jsx)(b.b,{to:"/signup",children:"Sign up |"})}),Object(N.jsx)("li",{children:this.state.isLoggedIn?null:Object(N.jsx)(b.b,{to:"/login",children:"Log in"})}),Object(N.jsx)("li",{children:this.state.isLoggedIn?Object(N.jsx)(b.b,{to:"/logout",onClick:this.handleClick,children:"Log Out"}):null})]})}),Object(N.jsx)("div",{className:"title",children:Object(N.jsx)("h2",{children:Object(N.jsx)(b.b,{to:"/",children:"RPG Character Creator"})})}),Object(N.jsxs)(g.c,{children:[Object(N.jsx)(g.a,{exact:!0,path:"/",render:function(t){return Object(N.jsx)(M,Object(i.a)(Object(i.a)({},t),{},{handleLogout:e.handleLogout,loggedInStatus:e.state.isLoggedIn}))}}),this.state.isLoggedIn&&Object(N.jsx)(g.a,{exact:!0,path:"/enter",component:function(t){return Object(N.jsx)(D,Object(i.a)(Object(i.a)({},t),{},{getInfo:e.getInfo}))}}),Object(N.jsx)(g.a,{path:"/create",children:Object(N.jsx)(E,{name:this.state.name,isLoggedIn:this.state.isLoggedIn})}),this.state.isLoggedIn&&Object(N.jsx)(g.a,{path:"/finished",children:Object(N.jsx)(R,{get:this.state.itemId})}),this.state.isLoggedIn&&Object(N.jsx)(g.a,{path:"/account",children:Object(N.jsx)(z,{user:this.state.user})}),Object(N.jsx)(g.a,{exact:!0,path:"/signup",render:function(t){return Object(N.jsx)(P,Object(i.a)(Object(i.a)({},t),{},{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn}))}}),Object(N.jsx)(g.a,{exact:!0,path:"/login",render:function(t){return Object(N.jsx)(G,Object(i.a)(Object(i.a)({},t),{},{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn,getAccount:e.getAccount}))}}),Object(N.jsx)(g.a,{path:"/logout",children:Object(N.jsx)(T,{})})]})]})})}}]),n}(a.Component)),q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};c.a.render(Object(N.jsx)(s.a.StrictMode,{children:Object(N.jsx)(V,{})}),document.getElementById("root")),q()}},[[74,1,2]]]);
//# sourceMappingURL=main.cda65a57.chunk.js.map