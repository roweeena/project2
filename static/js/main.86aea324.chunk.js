(this["webpackJsonprpg-character-front"]=this["webpackJsonprpg-character-front"]||[]).push([[0],{45:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(37),r=n.n(c),i=(n(45),n(19)),o=n(3),l=n(4),h=n(6),u=n(5),j=n(18),d=n.n(j),b=n(14),g=n(2),O=n(40),m=n(7),p=n(22),x=n.n(p),v=n(0),f=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={items:[],itemsList:{},categoryNames:[],subCategoryNames:[],selectedCategory:"",selectedSubcategory:""},e.itemRendering=e.itemRendering.bind(Object(m.a)(e)),e.getCategories=e.getCategories.bind(Object(m.a)(e)),e.getSubCategories=e.getSubCategories.bind(Object(m.a)(e)),e._handleChange=e._handleChange.bind(Object(m.a)(e)),e._handleSubChange=e._handleSubChange.bind(Object(m.a)(e)),e.setAvatarItems=e.setAvatarItems.bind(Object(m.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t={};d.a.get("https://maplestory.io/api/GMS/224/item/category/equip").then((function(n){t=n.data;var a=x.a.mapValues(x.a.groupBy(t,(function(e){return e.typeInfo.category})),(function(e){return x.a.groupBy(e,(function(e){return e.typeInfo.subCategory}))}));e.getCategories(a),e.setState({itemsList:a})}))}},{key:"itemRendering",value:function(e,t,n){var a=this;if(Object.keys(e).length)return e[t][n].slice(0,100).map((function(e){return Object(v.jsxs)("a",{href:"",children:[Object(v.jsx)("img",{src:a.characterURL(e.id),alt:"Maplestory item",onClick:function(t){a.setAvatarItems(t,e.id)}},a.characterURL(e.id))," "]},e.id)}))}},{key:"urlGenerator",value:function(e){var t=this,n=[];return e.map((function(e){n.push("".concat(t.state))})),console.log(n.join(",")),n.join(",")}},{key:"characterURL",value:function(e){return"https://maplestory.io/api/GMS/224/item/".concat(e,"/icon")}},{key:"setAvatarItems",value:function(e,t){e.preventDefault(),console.log("HEY FROM setAvatarItems",e,t),this.setState({items:t}),this.props.avatarItems(t)}},{key:"getCategories",value:function(e){var t=Object.keys(e);console.log("Some categories",t),this.setState({categoryNames:t}),this.setState({selectedCategory:t[0]}),this.getSubCategories(t[0],e)}},{key:"getSubCategories",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.itemsList;console.log("s",e),console.log("subcategory ItemsList",t);var n=Object.keys(t[e]);return this.setState({subCategoryNames:n,selectedSubcategory:n[0]}),console.log("getSubCategories",Object.keys(t[e])),Object.keys(t[e])}},{key:"_handleChange",value:function(e){var t=this;console.log("items list",this.state.itemsList),this.setState({selectedSubcategory:""}),this.setState({selectedCategory:e.target.value},(function(){var e=t.getSubCategories(t.state.selectedCategory);t.setState({selectedSubcategory:e[0]}),console.log("is this null",t.state.selectedCategory)}))}},{key:"_handleSubChange",value:function(e){this.setState({selectedSubcategory:e.target.value}),console.log("_handleSubChange")}},{key:"_handleSave",value:function(){console.log("save")}},{key:"render",value:function(){return Object(v.jsx)("div",{className:"item-select",children:Object(v.jsxs)("aside",{children:[Object(v.jsx)("h4",{children:"Make a selection:"}),Object(v.jsx)("select",{onChange:this._handleChange,value:this.state.selectedCategory,children:this.state.categoryNames.map((function(e,t){return Object(v.jsxs)("option",{value:e,defaultValue:0===t,children:[e," "]},e)}))}),Object(v.jsx)("select",{onChange:this._handleSubChange,value:this.state.selectedSubcategory,children:this.state.subCategoryNames.map((function(e){return Object(v.jsxs)("option",{value:e,children:[e," "]},e)}))}),Object(v.jsx)("div",{className:"items-render",children:this.state.selectedCategory&&this.state.selectedSubcategory?this.itemRendering(this.state.itemsList,this.state.selectedCategory,this.state.selectedSubcategory):null}),Object(v.jsx)("div",{className:"studioButtons",children:Object(v.jsx)("button",{onClick:this._handleSave,children:" Save "})})]})})}}]),n}(a.Component),C=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e))._handleItemIds=function(e){a.setState({itemId:[].concat(Object(O.a)(a.state.itemId),[e])}),console.log("_handleItemIds",a.state.itemId)},a.state={isLoggedIn:!1,name:"",class:"",catchphrase:"",itemId:[]},a.characterURL=a.characterURL.bind(Object(m.a)(a)),a._handleClear=a._handleClear.bind(Object(m.a)(a)),a}return Object(l.a)(n,[{key:"urlGenerator",value:function(e){var t=[];return e.map((function(e){t.push("{'itemId':".concat(e,",'version':'224'}"))})),console.log(t.join(",")),t.join(",")}},{key:"characterURL",value:function(e){return"https://maplestory.io/api/character/".concat(e,"/stand1/0?showears=false&showLefEars=false&showHighLefEars=undefined&resize=1&name=&flipX=false&bgColor=0,0,0,0")}},{key:"_handleClear",value:function(e){this.setState({itemId:[]})}},{key:"render",value:function(){return this.props.isLoggedIn?Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"home",id:"create",children:[Object(v.jsx)("div",{className:"test",children:Object(v.jsxs)("h5",{children:[" ",this.props.name]})}),Object(v.jsx)("div",{className:"studio",children:Object(v.jsx)("img",{src:this.characterURL(this.urlGenerator(x.a.flatten([2e3,12e3,this.state.itemId]))),alt:"item images"})}),Object(v.jsx)(f,{avatarItems:this._handleItemIds,itemId:this.state.itemId}),Object(v.jsx)("div",{className:"studioButtons",children:Object(v.jsx)("button",{onClick:this._handleClear,children:" Clear "})})]})}):Object(v.jsx)("div",{children:Object(v.jsx)("h3",{children:"You don't have access to this page. Please log in or sign up to start creating your character."})})}}]),n}(a.Component),y=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{id:"enter",children:[Object(v.jsx)("img",{src:"https://i.pinimg.com/originals/ec/f9/c5/ecf9c521d2ca6970e9d13e25505fd95d.gif",height:"100px",alt:""}),Object(v.jsx)(b.b,{to:"/login",children:Object(v.jsx)("button",{children:"Enter"})})]})}}]),n}(a.Component),S=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).getInfo=function(e){a.setState({name:e})},a.state={name:"",class:"",catchphrase:""},a._handleSubmit=a._handleSubmit.bind(Object(m.a)(a)),a._renderName=a._renderName.bind(Object(m.a)(a)),a._renderClass=a._renderClass.bind(Object(m.a)(a)),a._renderCatchphrase=a._renderCatchphrase.bind(Object(m.a)(a)),a.getInfo=a.getInfo.bind(Object(m.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getInfo()}},{key:"_renderName",value:function(e){this.setState({name:e.target.value})}},{key:"_renderClass",value:function(e){this.setState({class:e.target.value})}},{key:"_renderCatchphrase",value:function(e){this.setState({catchphrase:e.target.value})}},{key:"_handleSubmit",value:function(e){e.preventDefault(),this.props.getInfo(this.state.name),console.log("this.props.getInfo(this.state.name)"),this.setState({name:"",catchprase:"",class:""}),this.props.history.push("/create")}},{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"enter",children:Object(v.jsxs)("div",{className:"form",children:[Object(v.jsx)("h3",{children:"Welcome!"}),Object(v.jsx)("p",{children:Object(v.jsx)("small",{children:"Type in your character name, class and a catchprase! "})}),Object(v.jsxs)("form",{onSubmit:this._handleSubmit,children:["Name:",Object(v.jsx)("input",{type:"text",onChange:this._renderName,value:this.state.name,required:!0}),Object(v.jsx)("br",{}),"Class: ",Object(v.jsxs)("select",{onChange:this._renderClass,value:this.state.class,children:[Object(v.jsx)("option",{value:"Choose an option"}),Object(v.jsx)("option",{value:"magician",children:"Magician"}),Object(v.jsx)("option",{value:"thief",children:"Thief"}),Object(v.jsx)("option",{value:"warrior",children:"Warrior"}),Object(v.jsx)("option",{value:"bowman",children:"Bowman"}),Object(v.jsx)("option",{value:"pirate",children:"Pirate"})]}),Object(v.jsx)("br",{}),"Catchphrase:",Object(v.jsx)("input",{type:"text",onChange:this._renderCatchphrase,value:this.state.catchphrase}),Object(v.jsx)("br",{}),Object(v.jsx)("button",{type:"submit",children:"START"})]})]})})]})}}]),n}(a.Component),I=n(76),L=n(77),k=n(78),_=n(79),w=n(80),N=n(81),R=n(82),A=n(83),E=n(84),M=n(85),D=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e="http://localhost:3000/",t="RPG Character Creator";return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"home",children:[Object(v.jsx)("h2",{children:"(Character name)"}),Object(v.jsx)("img",{src:"https://via.placeholder.com/400",alt:"Finished product"}),Object(v.jsx)("h5",{children:"Share your avatar"}),Object(v.jsxs)("div",{className:"socials",children:[Object(v.jsx)(I.a,{url:e,quote:t,children:Object(v.jsx)(L.a,{size:32})}),Object(v.jsx)(k.a,{url:e,title:t,children:Object(v.jsx)(_.a,{size:32})}),Object(v.jsx)(w.a,{url:e,children:Object(v.jsx)(N.a,{size:32})}),Object(v.jsx)(R.a,{url:e,title:t,children:Object(v.jsx)(A.a,{size:32})}),Object(v.jsx)(E.a,{url:e,title:t,children:Object(v.jsx)(M.a,{size:32})})]})]})})}}]),n}(a.Component),U=n(21),P=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(U.a)({},n,s))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n={username:t.username,email:t.email,password:t.password,password_confirmation:t.password_confirmation};d.a.post("http://localhost:3001/users",{user:n},{withCredentials:!0}).then((function(e){"created"===e.data.status?(a.props.handleLogin(e.data),a.redirect()):a.setState({errors:e.data.errors})})).catch((function(e){return console.log("api errors:",e)}))},a.redirect=function(){a.props.history.push("/enter")},a.handleErrors=function(){return Object(v.jsx)("div",{children:Object(v.jsx)("ul",{children:a.state.errors.map((function(e){return Object(v.jsx)("li",{children:e},e)}))})})},a.state={username:"",email:"",password:"",password_confirmation:"",errors:""},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.email,a=e.password,s=e.password_confirmation;return Object(v.jsxs)("div",{className:"home",children:[Object(v.jsx)("h3",{children:"Sign Up"}),Object(v.jsxs)("form",{onSubmit:this.handleSubmit,children:["Name: ",Object(v.jsx)("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),Object(v.jsx)("br",{}),"Email:",Object(v.jsx)("input",{type:"text",name:"email",value:n,onChange:this.handleChange}),Object(v.jsx)("br",{}),"Password:",Object(v.jsx)("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),Object(v.jsx)("br",{}),"Confirm password:",Object(v.jsx)("input",{type:"password",name:"password_confirmation",value:s,onChange:this.handleChange}),Object(v.jsx)("br",{}),Object(v.jsx)("button",{placeholder:"submit",type:"submit",children:"Sign Up"})]}),Object(v.jsx)("div",{children:this.state.errors?this.handleErrors():null})]})}}]),n}(a.Component),B=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(U.a)({},n,s))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n={email:t.email,password:t.password};d.a.post("http://localhost:3001/login",{user:n},{withCredentials:!0}).then((function(e){e.data.logged_in?(a.props.handleLogin(e.data),a.redirect()):a.setState({errors:e.data.errors})})).catch((function(e){return console.log("api errors:",e)}))},a.redirect=function(){a.props.history.push("/enter")},a.handleErrors=function(){return Object(v.jsx)("div",{children:Object(v.jsx)("ul",{children:a.state.errors.map((function(e){return Object(v.jsx)("li",{children:e},e)}))})})},a.state={email:"",password:"",errors:""},a.getAccount=a.getAccount.bind(Object(m.a)(a)),a}return Object(l.a)(n,[{key:"componentWillMount",value:function(){return this.getAccount(),this.props.loggedInStatus?this.redirect():null}},{key:"getAccount",value:function(e){this.setState({email:e})}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return Object(v.jsxs)("div",{className:"home",children:[Object(v.jsx)("h3",{children:"Log In"}),Object(v.jsx)("div",{className:"form",children:Object(v.jsxs)("form",{onSubmit:this.handleSubmit,children:["Email: ",Object(v.jsx)("input",{type:"text",name:"email",value:t,onChange:this.handleChange}),Object(v.jsx)("br",{}),"Password:",Object(v.jsx)("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),Object(v.jsx)("br",{}),Object(v.jsx)("button",{placeholder:"submit",type:"submit",children:"Log In"}),Object(v.jsx)("div",{children:Object(v.jsx)("p",{children:Object(v.jsxs)("small",{children:["Don't have an account? ",Object(v.jsx)(b.b,{to:"/signup",children:" Sign up"})]})})})]})}),Object(v.jsx)("div",{children:this.state.errors?this.handleErrors():null})]})}}]),n}(a.Component),G=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsx)("h3",{children:"Thank you for visiting!"})})}}]),n}(a.Component),T=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={username:"",email:""},a}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"home",children:["Your account",Object(v.jsxs)("div",{className:"account",children:[Object(v.jsxs)("p",{children:["Name: ",Object(v.jsx)("small",{children:this.props.user&&this.props.user.username})]}),Object(v.jsxs)("p",{children:["Email: ",Object(v.jsxs)("small",{children:[" ",this.props.user&&this.props.user.email]})]}),Object(v.jsx)("p",{children:"Saved characters:"}),Object(v.jsx)("div",{})]})]})}}]),n}(a.Component),z=n(9),F=Object(z.a)(),q=(n(73),function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).getInfo=function(e){a.setState({name:e})},a.handleClick=function(){d.a.delete("http://localhost:3001/logout",{withCredentials:!0}).then((function(e){a.handleLogout(),a.history.push("/")})).catch((function(e){return console.log(e)}))},a.loginStatus=function(){d.a.get("http://localhost:3001/logged_in",{withCredentials:!0}).then((function(e){e.data.logged_in?a.handleLogin(e):a.handleLogout()})).catch((function(e){return console.log("api errors:",e)}))},a.handleLogin=function(e){a.setState({isLoggedIn:!0,user:e.user})},a.handleLogout=function(){a.setState({isLoggedIn:!1,user:{}})},a.state={isLoggedIn:!1,user:{},name:"",class:"",catchphrase:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loginStatus()}},{key:"render",value:function(){var e=this;return Object(v.jsx)("div",{children:Object(v.jsxs)(b.a,{history:F,children:[Object(v.jsx)("nav",{children:Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{children:Object(v.jsx)(b.b,{to:"/",children:" Home |"})}),Object(v.jsx)("li",{children:this.state.isLoggedIn?Object(v.jsx)(b.b,{to:"/create",children:"Create |"}):null}),Object(v.jsx)("li",{children:this.state.isLoggedIn?null:Object(v.jsx)(b.b,{to:"/signup",children:"Sign up |"})}),Object(v.jsx)("li",{children:this.state.isLoggedIn?null:Object(v.jsx)(b.b,{to:"/login",children:"Log in"})}),Object(v.jsx)("li",{children:this.state.isLoggedIn?Object(v.jsx)(b.b,{to:"/logout",onClick:this.handleClick,children:"Log Out"}):null})]})}),Object(v.jsx)("div",{className:"title",children:Object(v.jsx)("h2",{children:Object(v.jsx)(b.b,{to:"/",children:"RPG Character Creator"})})}),Object(v.jsxs)(g.c,{children:[Object(v.jsx)(g.a,{exact:!0,path:"/",render:function(t){return Object(v.jsx)(y,Object(i.a)(Object(i.a)({},t),{},{handleLogout:e.handleLogout,loggedInStatus:e.state.isLoggedIn}))}}),this.state.isLoggedIn&&Object(v.jsx)(g.a,{exact:!0,path:"/enter",component:function(t){return Object(v.jsx)(S,Object(i.a)(Object(i.a)({},t),{},{getInfo:e.getInfo}))}}),Object(v.jsx)(g.a,{path:"/create",children:Object(v.jsx)(C,{name:this.state.name,isLoggedIn:this.state.isLoggedIn})}),this.state.isLoggedIn&&Object(v.jsx)(g.a,{path:"/finished",children:Object(v.jsx)(D,{})}),this.state.isLoggedIn&&Object(v.jsx)(g.a,{path:"/account",children:Object(v.jsx)(T,{user:this.state.user})}),Object(v.jsx)(g.a,{exact:!0,path:"/signup",render:function(t){return Object(v.jsx)(P,Object(i.a)(Object(i.a)({},t),{},{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn}))}}),Object(v.jsx)(g.a,{exact:!0,path:"/login",render:function(t){return Object(v.jsx)(B,Object(i.a)(Object(i.a)({},t),{},{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn,getAccount:e.getAccount}))}}),Object(v.jsx)(g.a,{path:"/logout",children:Object(v.jsx)(G,{})})]})]})})}}]),n}(a.Component)),H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};r.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(q,{})}),document.getElementById("root")),H()}},[[74,1,2]]]);
//# sourceMappingURL=main.86aea324.chunk.js.map