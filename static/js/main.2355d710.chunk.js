(this["webpackJsonprpg-character-front"]=this["webpackJsonprpg-character-front"]||[]).push([[0],{45:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(37),c=a.n(r),i=(a(45),a(16)),o=a(4),h=a(5),l=a(7),u=a(6),d=a(9),j=a.n(d),b=a(13),g=a(3),p=a(40),O=a(2),m=a(20),f=a.n(m),x=a(76),v=a(77),C=a(78),y=a(79),S=a(80),I=a(81),k=a(82),_=a(83),L=a(84),w=a(85),N=a(0),R=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={name:"",catchphrase:"",class:""},e}return Object(h.a)(a,[{key:"render",value:function(){var e="https://roweeena.github.io/project2",t="RPG Character Creator";return Object(N.jsx)("div",{children:Object(N.jsxs)("div",{className:"home",children:[Object(N.jsx)("h2",{children:this.props.name}),Object(N.jsx)("img",{src:this.props.imgUrl,alt:"Finished product"}),Object(N.jsx)("p",{children:this.props.class}),Object(N.jsx)("p",{children:this.props.catchphrase}),Object(N.jsx)("h5",{children:"Share your avatar"}),Object(N.jsxs)("div",{className:"socials",children:[Object(N.jsx)(x.a,{url:e,quote:t,children:Object(N.jsx)(v.a,{size:32})}),Object(N.jsx)(C.a,{url:e,title:t,children:Object(N.jsx)(y.a,{size:32})}),Object(N.jsx)(S.a,{url:e,children:Object(N.jsx)(I.a,{size:32})}),Object(N.jsx)(k.a,{url:e,title:t,children:Object(N.jsx)(_.a,{size:32})}),Object(N.jsx)(L.a,{url:e,title:t,children:Object(N.jsx)(w.a,{size:32})})]})]})})}}]),a}(n.Component),D=a(10),U=Object(D.a)(),A=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={items:[],itemsId:e.itemId,itemsList:{},categoryNames:[],subCategoryNames:[],selectedCategory:"",selectedSubcategory:""},n.itemRendering=n.itemRendering.bind(Object(O.a)(n)),n.getCategories=n.getCategories.bind(Object(O.a)(n)),n.getSubCategories=n.getSubCategories.bind(Object(O.a)(n)),n._handleChange=n._handleChange.bind(Object(O.a)(n)),n._handleSubChange=n._handleSubChange.bind(Object(O.a)(n)),n._handleClear=n._handleClear.bind(Object(O.a)(n)),n.setAvatarItems=n.setAvatarItems.bind(Object(O.a)(n)),n._handleSave=n._handleSave.bind(Object(O.a)(n)),n._handleShare=n._handleShare.bind(Object(O.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={};j.a.get("https://maplestory.io/api/GMS/224/item/category/equip").then((function(a){t=a.data;var n=f.a.mapValues(f.a.groupBy(t,(function(e){return e.typeInfo.category})),(function(e){return f.a.groupBy(e,(function(e){return e.typeInfo.subCategory}))}));e.getCategories(n),e.setState({itemsList:n})}))}},{key:"itemRendering",value:function(e,t,a){var n=this;if(Object.keys(e).length)return e[t][a].slice(0,100).map((function(e){return Object(N.jsxs)("a",{href:"",children:[Object(N.jsx)("img",{src:n.characterURL(e.id),alt:"Maplestory item",onClick:function(t){n.setAvatarItems(t,e.id)}},n.characterURL(e.id))," "]},e.id)}))}},{key:"urlGenerator",value:function(e){var t=this,a=[];return e.map((function(e){a.push("".concat(t.state))})),console.log(a.join(",")),a.join(",")}},{key:"characterURL",value:function(e){return"https://maplestory.io/api/GMS/224/item/".concat(e,"/icon")}},{key:"setAvatarItems",value:function(e,t){e.preventDefault(),console.log("HEY FROM setAvatarItems",e,t),this.setState({items:t}),this.props.avatarItems(t)}},{key:"getCategories",value:function(e){var t=Object.keys(e);console.log("Some categories",t),this.setState({categoryNames:t})}},{key:"_handleChange",value:function(e){var t=this;console.log("items list",this.state.itemsList),this.setState({selectedSubcategory:""}),this.setState({selectedCategory:e.target.value},(function(){t.getSubCategories(t.state.selectedCategory)}))}},{key:"getSubCategories",value:function(e){console.log("s",e),console.log("subcategory ItemsList",this.state.itemsList),this.setState({subCategoryNames:Object.keys(this.state.itemsList[e])}),console.log("getSubCategories",Object.keys(this.state.itemsList[e]))}},{key:"_handleSubChange",value:function(e){this.setState({selectedSubcategory:e.target.value}),console.log("_handleSubChange")}},{key:"_handleSave",value:function(){console.log(this.props.itemId),j.a.put("https://rpg-generator-backend.herokuapp.com"+"/characters/".concat(this.props.character.id),{items:this.props.itemId.join(",")}),console.log("save")}},{key:"_handleClear",value:function(){this.props.handleClear()}},{key:"_handleShare",value:function(){this.props.history.push("/finished")}},{key:"render",value:function(){return Object(N.jsx)("div",{className:"item-select",children:Object(N.jsxs)("aside",{children:[Object(N.jsx)("h4",{children:"Make a selection:"}),Object(N.jsxs)("select",{onChange:this._handleChange,defaultValue:"",children:[Object(N.jsx)("option",{value:"",disabled:!0,children:" "}),this.state.categoryNames.map((function(e){return Object(N.jsxs)("option",{value:e,children:[e," "]},e)}))]}),Object(N.jsxs)("select",{onChange:this._handleSubChange,defaultValue:"",children:[Object(N.jsx)("option",{value:""}),this.state.subCategoryNames.map((function(e){return Object(N.jsxs)("option",{value:e,children:[e," "]},e)}))]}),Object(N.jsx)("div",{className:"items-render",children:this.state.selectedCategory&&this.state.selectedSubcategory?this.itemRendering(this.state.itemsList,this.state.selectedCategory,this.state.selectedSubcategory):null}),Object(N.jsxs)("div",{className:"studioButtons",children:[Object(N.jsx)("button",{onClick:this._handleSave,children:" Save "}),Object(N.jsx)("button",{onClick:this._handleClear,children:" Clear "}),Object(N.jsx)("button",{onClick:this._handleShare,children:" Share "})]})]})})}}]),a}(n.Component),E=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e))._handleItemIds=function(e){var t=[].concat(Object(p.a)(n.state.itemId),[e]);n.setState({itemId:t}),n.props.getImage(n.characterURL(n.urlGenerator(f.a.flatten([2e3,12e3,t])))),j.a.put("https://rpg-generator-backend.herokuapp.com"+"/characters/".concat(n.props.character.id),{image:n.characterURL(n.urlGenerator(f.a.flatten([2e3,12e3,t])))}),console.log("_handleItemIds",n.state.itemId)},n.state={isLoggedIn:!1,name:"",class:"",catchphrase:"",itemId:[],img:""},n.characterURL=n.characterURL.bind(Object(O.a)(n)),n._handleClear=n._handleClear.bind(Object(O.a)(n)),n._handleShare=n._handleShare.bind(Object(O.a)(n)),n}return Object(h.a)(a,[{key:"urlGenerator",value:function(e){var t=[];return e.map((function(e){t.push("{'itemId':".concat(e,",'version':'224'}"))})),console.log(t.join(",")),t.join(",")}},{key:"characterURL",value:function(e){return"https://maplestory.io/api/character/".concat(e,"/stand1/0?showears=false&showLefEars=false&showHighLefEars=undefined&resize=1&name=&flipX=false&bgColor=0,0,0,0")}},{key:"_handleClear",value:function(e){this.setState({itemId:[]})}},{key:"_handleShare",value:function(){this.props.history.push("/finished")}},{key:"render",value:function(){return this.props.isLoggedIn?Object(N.jsxs)("div",{children:[Object(N.jsxs)("h5",{children:[" ",this.props.name]}),Object(N.jsxs)("div",{className:"home",id:"create",children:[Object(N.jsx)("div",{className:"studio",children:Object(N.jsx)("img",{src:this.characterURL(this.urlGenerator(f.a.flatten([2e3,12e3,this.state.itemId]))),alt:"character image"})}),Object(N.jsx)(A,{history:this.props.history,avatarItems:this._handleItemIds,itemId:this.state.itemId,handleClear:this._handleClear,character:this.props.character})]})]}):Object(N.jsx)("div",{children:Object(N.jsx)("h3",{children:"You don't have access to this page. Please log in or sign up to start creating your character."})})}}]),a}(n.Component),M=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(N.jsxs)("div",{id:"enter",children:[Object(N.jsx)("img",{src:"https://i.pinimg.com/originals/ec/f9/c5/ecf9c521d2ca6970e9d13e25505fd95d.gif",height:"100px",alt:""}),Object(N.jsx)(b.b,{to:"/login",children:Object(N.jsx)("button",{children:"Enter"})})]})}}]),a}(n.Component),G=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getInfo=function(e){n.setState({name:e})},n.state={isLoggedIn:!1,name:"",job:"",catchphrase:""},n._handleSubmit=n._handleSubmit.bind(Object(O.a)(n)),n._renderName=n._renderName.bind(Object(O.a)(n)),n._renderClass=n._renderClass.bind(Object(O.a)(n)),n._renderCatchphrase=n._renderCatchphrase.bind(Object(O.a)(n)),n.getInfo=n.getInfo.bind(Object(O.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.getInfo()}},{key:"_renderName",value:function(e){this.setState({name:e.target.value})}},{key:"_renderClass",value:function(e){this.setState({job:e.target.value})}},{key:"_renderCatchphrase",value:function(e){this.setState({catchphrase:e.target.value})}},{key:"_handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.getInfo(this.state.name),console.log("this.props.getInfo(this.state.name)"),this.setState({name:"",catchphrase:"",job:""}),this.props.history.push("/create"),j.a.post("https://rpg-generator-backend.herokuapp.com/characters",{name:this.state.name,catchphrase:this.state.catchphrase,job:this.state.job,user_id:this.props.user.id},{withCredentials:!0}).then((function(e){e.data.character?t.props.getCharacter(e.data.character):t.setState({errors:e.data.errors})}))}},{key:"render",value:function(){return Object(N.jsxs)("div",{children:[Object(N.jsx)("br",{}),Object(N.jsx)("div",{className:"enter",children:Object(N.jsxs)("div",{className:"form",children:[Object(N.jsx)("h3",{children:"Welcome!"}),Object(N.jsx)("p",{children:Object(N.jsx)("small",{children:"Type in your character name, class and a catchphrase! "})}),Object(N.jsxs)("form",{onSubmit:this._handleSubmit,children:["Name:",Object(N.jsx)("input",{type:"text",onChange:this._renderName,value:this.state.name,required:!0}),Object(N.jsx)("br",{}),"Class: ",Object(N.jsxs)("select",{onChange:this._renderClass,value:this.state.job,children:[Object(N.jsx)("option",{value:"Choose an option"}),Object(N.jsx)("option",{value:"magician",children:"Magician"}),Object(N.jsx)("option",{value:"thief",children:"Thief"}),Object(N.jsx)("option",{value:"warrior",children:"Warrior"}),Object(N.jsx)("option",{value:"bowman",children:"Bowman"}),Object(N.jsx)("option",{value:"pirate",children:"Pirate"})]}),Object(N.jsx)("br",{}),"Catchphrase:",Object(N.jsx)("input",{type:"text",onChange:this._renderCatchphrase,value:this.state.catchphrase}),Object(N.jsx)("br",{}),Object(N.jsx)("button",{type:"submit",children:"START"})]})]})})]})}}]),a}(n.Component),T=a(22),P=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,s=t.value;n.setState(Object(T.a)({},a,s))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a={username:t.username,email:t.email,password:t.password,password_confirmation:t.password_confirmation};j.a.post("https://rpg-generator-backend.herokuapp.com/users",{user:a},{withCredentials:!0}).then((function(e){"created"===e.data.status?(n.props.handleLogin(e.data),n.redirect()):n.setState({errors:e.data.errors})})).catch((function(e){return console.log("api errors:",e)}))},n.redirect=function(){n.props.history.push("/enter")},n.handleErrors=function(){return Object(N.jsx)("div",{children:Object(N.jsx)("ul",{children:n.state.errors.map((function(e){return Object(N.jsx)("li",{children:e},e)}))})})},n.state={username:"",email:"",password:"",password_confirmation:"",errors:""},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.password,s=e.password_confirmation;return Object(N.jsxs)("div",{className:"home",children:[Object(N.jsx)("h3",{children:"Sign Up"}),Object(N.jsxs)("form",{onSubmit:this.handleSubmit,children:["Name: ",Object(N.jsx)("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),Object(N.jsx)("br",{}),"Email:",Object(N.jsx)("input",{type:"text",name:"email",value:a,onChange:this.handleChange}),Object(N.jsx)("br",{}),"Password:",Object(N.jsx)("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),Object(N.jsx)("br",{}),"Confirm password:",Object(N.jsx)("input",{type:"password",name:"password_confirmation",value:s,onChange:this.handleChange}),Object(N.jsx)("br",{}),Object(N.jsx)("button",{placeholder:"submit",type:"submit",children:"Sign Up"})]}),Object(N.jsx)("div",{children:this.state.errors?this.handleErrors():null})]})}}]),a}(n.Component),z=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,s=t.value;n.setState(Object(T.a)({},a,s))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a={email:t.email,password:t.password};j.a.post("https://rpg-generator-backend.herokuapp.com/login",{user:a},{withCredentials:!0}).then((function(e){e.data.logged_in?(n.props.handleLogin(e.data),n.redirect()):n.setState({errors:e.data.errors})})).catch((function(e){return console.log("api errors:",e)}))},n.redirect=function(){n.props.history.push("/enter")},n.handleErrors=function(){return Object(N.jsx)("div",{children:Object(N.jsx)("ul",{children:n.state.errors.map((function(e){return Object(N.jsx)("li",{children:e},e)}))})})},n.state={email:"",password:"",errors:""},n.getAccount=n.getAccount.bind(Object(O.a)(n)),n}return Object(h.a)(a,[{key:"componentWillMount",value:function(){return this.getAccount(),this.props.loggedInStatus?this.redirect():null}},{key:"getAccount",value:function(e){this.setState({email:e})}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return Object(N.jsxs)("div",{className:"home",children:[Object(N.jsx)("h3",{children:"Log In"}),Object(N.jsx)("div",{className:"form",children:Object(N.jsxs)("form",{onSubmit:this.handleSubmit,children:["Email: ",Object(N.jsx)("input",{type:"text",name:"email",value:t,onChange:this.handleChange}),Object(N.jsx)("br",{}),"Password:",Object(N.jsx)("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),Object(N.jsx)("br",{}),Object(N.jsx)("button",{placeholder:"submit",type:"submit",children:"Log In"}),Object(N.jsx)("div",{children:Object(N.jsx)("p",{children:Object(N.jsxs)("small",{children:["Don't have an account? ",Object(N.jsx)(b.b,{to:"/signup",children:" Sign up"})]})})})]})}),Object(N.jsx)("div",{children:this.state.errors?this.handleErrors():null})]})}}]),a}(n.Component),B=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(N.jsx)("div",{children:Object(N.jsx)("h3",{children:"Thank you for visiting!"})})}}]),a}(n.Component),F="https://rpg-generator-backend.herokuapp.com",q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={username:"",email:"",character:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log("fetching chars"),j.a.get(F+"/users/40",{withCredentials:!0}).then((function(t){e.setState({character:t.data.character}),console.log("Results.data",t.data),console.log("This state from fetchCharacters",e.state.character)}))}},{key:"render",value:function(){return Object(N.jsxs)("div",{className:"home",children:["Your account",Object(N.jsxs)("div",{className:"account",children:[Object(N.jsxs)("p",{children:["Name: ",Object(N.jsx)("small",{children:this.props.user&&this.props.user.username})]}),Object(N.jsxs)("p",{children:["Email: ",Object(N.jsxs)("small",{children:[" ",this.props.user&&this.props.user.email]})]}),Object(N.jsx)(H,{character:this.state.character,click:this._handleClick})]})]})}}]),a}(n.Component),H=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this))._handleDelete=function(e){console.log("This is _handleDelete",e),j.a.delete(F+"/characters/".concat(e))},e.state={character:[]},e._handleDelete=e._handleDelete.bind(Object(O.a)(e)),e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return Object(N.jsxs)("div",{children:[Object(N.jsx)("p",{children:"Saved characters:"}),this.props.character.map((function(t){return Object(N.jsxs)("li",{onClick:function(){e._handleClick(t.id)},children:["Name:",Object(N.jsx)("button",{onClick:console.log("hi"),children:t.name}),", Class: ",t.job,", Catchphrase: ",t.catchphrase,Object(N.jsx)("button",{onClick:function(){e._handleDelete(t.id)},children:" Delete Character"}),Object(N.jsx)("br",{})]},t.id)}))]})}}]),a}(n.Component),V=q,W=(a(73),"https://rpg-generator-backend.herokuapp.com"),Y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getInfo=function(e){n.setState({name:e})},n.getImage=function(e){n.setState({imgUrl:e})},n.getCharacter=function(e){n.setState({character:e})},n.handleClick=function(){j.a.delete(W+"/logout",{withCredentials:!0}).then((function(e){n.handleLogout(),n.history.push("/")})).catch((function(e){return console.log(e)}))},n.loginStatus=function(){j.a.get(W+"/logged_in",{withCredentials:!0}).then((function(e){e.data.logged_in?n.handleLogin(e):n.handleLogout()})).catch((function(e){return console.log("api errors:",e)}))},n.handleLogin=function(e){n.setState({isLoggedIn:!0,user:e.user})},n.handleLogout=function(){n.setState({isLoggedIn:!1,user:{}})},n.state={isLoggedIn:!1,user:{},name:"",class:"",catchphrase:"",imgUrl:"",character:""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.loginStatus()}},{key:"render",value:function(){var e=this;return Object(N.jsxs)("div",{children:[Object(N.jsxs)(b.a,{history:U,children:[Object(N.jsx)("nav",{children:Object(N.jsxs)("ul",{children:[Object(N.jsx)("li",{children:Object(N.jsx)(b.b,{to:"/",children:" Home |"})}),Object(N.jsx)("li",{children:this.state.isLoggedIn?Object(N.jsx)(b.b,{to:"/enter",children:"Create |"}):null}),Object(N.jsx)("li",{children:this.state.isLoggedIn?Object(N.jsx)(b.b,{to:"/account",children:"Account |"}):null}),Object(N.jsx)("li",{children:this.state.isLoggedIn?Object(N.jsx)(b.b,{to:"/logout",onClick:this.handleClick,children:"Log Out"}):null}),Object(N.jsx)("li",{children:this.state.isLoggedIn?null:Object(N.jsx)(b.b,{to:"/signup",children:"Sign up |"})}),Object(N.jsx)("li",{children:this.state.isLoggedIn?null:Object(N.jsx)(b.b,{to:"/login",children:"Log in"})})]})}),Object(N.jsx)("div",{className:"title",children:Object(N.jsx)("h2",{children:Object(N.jsx)(b.b,{to:"/",children:"RPG Character Creator"})})}),Object(N.jsxs)(g.c,{children:[Object(N.jsx)(g.a,{exact:!0,path:"/",render:function(t){return Object(N.jsx)(M,Object(i.a)(Object(i.a)({},t),{},{handleLogout:e.handleLogout,loggedInStatus:e.state.isLoggedIn}))}}),this.state.isLoggedIn&&Object(N.jsx)(g.a,{exact:!0,path:"/enter",component:function(t){return Object(N.jsx)(G,Object(i.a)(Object(i.a)({},t),{},{getInfo:e.getInfo,user:e.state.user,getCharacter:e.getCharacter}))}}),this.state.isLoggedIn&&Object(N.jsx)(g.a,{exact:!0,path:"/create",component:function(t){return Object(N.jsx)(E,Object(i.a)(Object(i.a)({},t),{},{name:e.state.name,isLoggedIn:e.state.isLoggedIn,getImage:e.getImage,character:e.state.character}))}}),this.state.isLoggedIn&&Object(N.jsx)(g.a,{path:"/finished",children:Object(N.jsx)(R,{get:this.state.itemId,imgUrl:this.state.imgUrl,getInfo:this.getInfo})}),this.state.isLoggedIn&&Object(N.jsx)(g.a,{path:"/account",children:Object(N.jsx)(V,{user:this.state.user})}),Object(N.jsx)(g.a,{exact:!0,path:"/signup",render:function(t){return Object(N.jsx)(P,Object(i.a)(Object(i.a)({},t),{},{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn}))}}),Object(N.jsx)(g.a,{exact:!0,path:"/login",render:function(t){return Object(N.jsx)(z,Object(i.a)(Object(i.a)({},t),{},{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn,getAccount:e.getAccount}))}}),Object(N.jsx)(g.a,{path:"/logout",children:Object(N.jsx)(B,{})})]})]}),Object(N.jsx)("footer",{children:"Copyright 2021"})]})}}]),a}(n.Component),J=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,86)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};c.a.render(Object(N.jsx)(s.a.StrictMode,{children:Object(N.jsx)(Y,{})}),document.getElementById("root")),J()}},[[74,1,2]]]);
//# sourceMappingURL=main.2355d710.chunk.js.map