(this["webpackJsonprpg-character-front"]=this["webpackJsonprpg-character-front"]||[]).push([[0],{45:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(37),c=a.n(r),i=(a(45),a(19)),o=a(4),l=a(5),h=a(7),u=a(6),d=a(18),j=a.n(d),b=a(14),g=a(2),O=a(40),p=a(3),m=a(22),x=a.n(m),v=a(0),f=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={items:[],itemsId:e.itemId,itemsList:{},categoryNames:[],subCategoryNames:[],selectedCategory:"",selectedSubcategory:""},n.itemRendering=n.itemRendering.bind(Object(p.a)(n)),n.getCategories=n.getCategories.bind(Object(p.a)(n)),n.getSubCategories=n.getSubCategories.bind(Object(p.a)(n)),n._handleChange=n._handleChange.bind(Object(p.a)(n)),n._handleSubChange=n._handleSubChange.bind(Object(p.a)(n)),n._handleClear=n._handleClear.bind(Object(p.a)(n)),n.setAvatarItems=n.setAvatarItems.bind(Object(p.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={};j.a.get("https://maplestory.io/api/GMS/224/item/category/equip").then((function(a){t=a.data;var n=x.a.mapValues(x.a.groupBy(t,(function(e){return e.typeInfo.category})),(function(e){return x.a.groupBy(e,(function(e){return e.typeInfo.subCategory}))}));e.getCategories(n),e.setState({itemsList:n})}))}},{key:"itemRendering",value:function(e,t,a){var n=this;if(Object.keys(e).length)return e[t][a].slice(0,100).map((function(e){return Object(v.jsxs)("a",{href:"",children:[Object(v.jsx)("img",{src:n.characterURL(e.id),alt:"Maplestory item",onClick:function(t){n.setAvatarItems(t,e.id)}},n.characterURL(e.id))," "]},e.id)}))}},{key:"urlGenerator",value:function(e){var t=this,a=[];return e.map((function(e){a.push("".concat(t.state))})),console.log(a.join(",")),a.join(",")}},{key:"characterURL",value:function(e){return"https://maplestory.io/api/GMS/224/item/".concat(e,"/icon")}},{key:"setAvatarItems",value:function(e,t){e.preventDefault(),console.log("HEY FROM setAvatarItems",e,t),this.setState({items:t}),this.props.avatarItems(t)}},{key:"getCategories",value:function(e){var t=Object.keys(e);console.log("Some categories",t),this.setState({categoryNames:t}),this.setState({selectedCategory:t[0]}),this.getSubCategories(t[0],e)}},{key:"getSubCategories",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.itemsList;console.log("s",e),console.log("subcategory ItemsList",t);var a=Object.keys(t[e]);return this.setState({subCategoryNames:a,selectedSubcategory:a[0]}),console.log("getSubCategories",Object.keys(t[e])),Object.keys(t[e])}},{key:"_handleChange",value:function(e){var t=this;console.log("items list",this.state.itemsList),this.setState({selectedSubcategory:""}),this.setState({selectedCategory:e.target.value},(function(){var e=t.getSubCategories(t.state.selectedCategory);t.setState({selectedSubcategory:e[0]}),console.log("is this null",t.state.selectedCategory)}))}},{key:"_handleSubChange",value:function(e){this.setState({selectedSubcategory:e.target.value}),console.log("_handleSubChange")}},{key:"_handleSave",value:function(){console.log("save")}},{key:"_handleClear",value:function(){this.props.handleClear()}},{key:"render",value:function(){return Object(v.jsx)("div",{className:"item-select",children:Object(v.jsxs)("aside",{children:[Object(v.jsx)("h4",{children:"Make a selection:"}),Object(v.jsx)("select",{onChange:this._handleChange,value:this.state.selectedCategory,children:this.state.categoryNames.map((function(e,t){return Object(v.jsxs)("option",{value:e,defaultValue:0===t,children:[e," "]},e)}))}),Object(v.jsx)("select",{onChange:this._handleSubChange,value:this.state.selectedSubcategory,children:this.state.subCategoryNames.map((function(e){return Object(v.jsxs)("option",{value:e,children:[e," "]},e)}))}),Object(v.jsx)("div",{className:"items-render",children:this.state.selectedCategory&&this.state.selectedSubcategory?this.itemRendering(this.state.itemsList,this.state.selectedCategory,this.state.selectedSubcategory):null}),Object(v.jsxs)("div",{className:"studioButtons",children:[Object(v.jsx)("button",{onClick:this._handleSave,children:" Save "}),Object(v.jsx)("button",{onClick:this._handleClear,children:" Clear "})]})]})})}}]),a}(n.Component),C=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e))._handleItemIds=function(e){n.setState({itemId:[].concat(Object(O.a)(n.state.itemId),[e])}),console.log("_handleItemIds",n.state.itemId)},n.state={isLoggedIn:!1,name:"",class:"",catchphrase:"",itemId:[]},n.characterURL=n.characterURL.bind(Object(p.a)(n)),n._handleClear=n._handleClear.bind(Object(p.a)(n)),n}return Object(l.a)(a,[{key:"urlGenerator",value:function(e){var t=[];return e.map((function(e){t.push("{'itemId':".concat(e,",'version':'224'}"))})),console.log(t.join(",")),t.join(",")}},{key:"characterURL",value:function(e){return"https://maplestory.io/api/character/".concat(e,"/stand1/0?showears=false&showLefEars=false&showHighLefEars=undefined&resize=1&name=&flipX=false&bgColor=0,0,0,0")}},{key:"_handleClear",value:function(e){this.setState({itemId:[]})}},{key:"render",value:function(){return this.props.isLoggedIn?Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"home",id:"create",children:[Object(v.jsxs)("h5",{children:[" ",this.props.name]}),Object(v.jsx)("div",{className:"studio",children:Object(v.jsx)("img",{src:this.characterURL(this.urlGenerator(x.a.flatten([2e3,12e3,this.state.itemId]))),alt:"item images"})}),Object(v.jsx)(f,{avatarItems:this._handleItemIds,itemId:this.state.itemId,handleClear:this._handleClear})]})}):Object(v.jsx)("div",{children:Object(v.jsx)("h3",{children:"You don't have access to this page. Please log in or sign up to start creating your character."})})}}]),a}(n.Component),y=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(v.jsxs)("div",{id:"enter",children:[Object(v.jsx)("img",{src:"https://i.pinimg.com/originals/ec/f9/c5/ecf9c521d2ca6970e9d13e25505fd95d.gif",height:"100px",alt:""}),Object(v.jsx)(b.b,{to:"/login",children:Object(v.jsx)("button",{children:"Enter"})})]})}}]),a}(n.Component),S=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getInfo=function(e){n.setState({name:e})},n.state={name:"",class:"",catchphrase:""},n._handleSubmit=n._handleSubmit.bind(Object(p.a)(n)),n._renderName=n._renderName.bind(Object(p.a)(n)),n._renderClass=n._renderClass.bind(Object(p.a)(n)),n._renderCatchphrase=n._renderCatchphrase.bind(Object(p.a)(n)),n.getInfo=n.getInfo.bind(Object(p.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getInfo()}},{key:"_renderName",value:function(e){this.setState({name:e.target.value})}},{key:"_renderClass",value:function(e){this.setState({class:e.target.value})}},{key:"_renderCatchphrase",value:function(e){this.setState({catchphrase:e.target.value})}},{key:"_handleSubmit",value:function(e){e.preventDefault(),this.props.getInfo(this.state.name),console.log("this.props.getInfo(this.state.name)"),this.setState({name:"",catchprase:"",class:""}),this.props.history.push("/create")}},{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"enter",children:Object(v.jsxs)("div",{className:"form",children:[Object(v.jsx)("h3",{children:"Welcome!"}),Object(v.jsx)("p",{children:Object(v.jsx)("small",{children:"Type in your character name, class and a catchprase! "})}),Object(v.jsxs)("form",{onSubmit:this._handleSubmit,children:["Name:",Object(v.jsx)("input",{type:"text",onChange:this._renderName,value:this.state.name,required:!0}),Object(v.jsx)("br",{}),"Class: ",Object(v.jsxs)("select",{onChange:this._renderClass,value:this.state.class,children:[Object(v.jsx)("option",{value:"Choose an option"}),Object(v.jsx)("option",{value:"magician",children:"Magician"}),Object(v.jsx)("option",{value:"thief",children:"Thief"}),Object(v.jsx)("option",{value:"warrior",children:"Warrior"}),Object(v.jsx)("option",{value:"bowman",children:"Bowman"}),Object(v.jsx)("option",{value:"pirate",children:"Pirate"})]}),Object(v.jsx)("br",{}),"Catchphrase:",Object(v.jsx)("input",{type:"text",onChange:this._renderCatchphrase,value:this.state.catchphrase}),Object(v.jsx)("br",{}),Object(v.jsx)("button",{type:"submit",children:"START"})]})]})})]})}}]),a}(n.Component),I=a(76),k=a(77),L=a(78),_=a(79),w=a(80),N=a(81),R=a(82),A=a(83),E=a(84),M=a(85),D=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e="https://rpg-generator-backend.herokuapp.com/",t="RPG Character Creator";return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"home",children:[Object(v.jsx)("h2",{children:"(Character name)"}),Object(v.jsx)("img",{src:"https://via.placeholder.com/400",alt:"Finished product"}),Object(v.jsx)("h5",{children:"Share your avatar"}),Object(v.jsxs)("div",{className:"socials",children:[Object(v.jsx)(I.a,{url:e,quote:t,children:Object(v.jsx)(k.a,{size:32})}),Object(v.jsx)(L.a,{url:e,title:t,children:Object(v.jsx)(_.a,{size:32})}),Object(v.jsx)(w.a,{url:e,children:Object(v.jsx)(N.a,{size:32})}),Object(v.jsx)(R.a,{url:e,title:t,children:Object(v.jsx)(A.a,{size:32})}),Object(v.jsx)(E.a,{url:e,title:t,children:Object(v.jsx)(M.a,{size:32})})]})]})})}}]),a}(n.Component),U=a(21),P=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,s=t.value;n.setState(Object(U.a)({},a,s))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a={username:t.username,email:t.email,password:t.password,password_confirmation:t.password_confirmation};j.a.post("https://rpg-generator-backend.herokuapp.com/users",{user:a},{withCredentials:!0}).then((function(e){"created"===e.data.status?(n.props.handleLogin(e.data),n.redirect()):n.setState({errors:e.data.errors})})).catch((function(e){return console.log("api errors:",e)}))},n.redirect=function(){n.props.history.push("/enter")},n.handleErrors=function(){return Object(v.jsx)("div",{children:Object(v.jsx)("ul",{children:n.state.errors.map((function(e){return Object(v.jsx)("li",{children:e},e)}))})})},n.state={username:"",email:"",password:"",password_confirmation:"",errors:""},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.password,s=e.password_confirmation;return Object(v.jsxs)("div",{className:"home",children:[Object(v.jsx)("h3",{children:"Sign Up"}),Object(v.jsxs)("form",{onSubmit:this.handleSubmit,children:["Name: ",Object(v.jsx)("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),Object(v.jsx)("br",{}),"Email:",Object(v.jsx)("input",{type:"text",name:"email",value:a,onChange:this.handleChange}),Object(v.jsx)("br",{}),"Password:",Object(v.jsx)("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),Object(v.jsx)("br",{}),"Confirm password:",Object(v.jsx)("input",{type:"password",name:"password_confirmation",value:s,onChange:this.handleChange}),Object(v.jsx)("br",{}),Object(v.jsx)("button",{placeholder:"submit",type:"submit",children:"Sign Up"})]}),Object(v.jsx)("div",{children:this.state.errors?this.handleErrors():null})]})}}]),a}(n.Component),G=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,s=t.value;n.setState(Object(U.a)({},a,s))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a={email:t.email,password:t.password};j.a.post("https://rpg-generator-backend.herokuapp.com/login",{user:a},{withCredentials:!0}).then((function(e){e.data.logged_in?(n.props.handleLogin(e.data),n.redirect()):n.setState({errors:e.data.errors})})).catch((function(e){return console.log("api errors:",e)}))},n.redirect=function(){n.props.history.push("/enter")},n.handleErrors=function(){return Object(v.jsx)("div",{children:Object(v.jsx)("ul",{children:n.state.errors.map((function(e){return Object(v.jsx)("li",{children:e},e)}))})})},n.state={email:"",password:"",errors:""},n.getAccount=n.getAccount.bind(Object(p.a)(n)),n}return Object(l.a)(a,[{key:"componentWillMount",value:function(){return this.getAccount(),this.props.loggedInStatus?this.redirect():null}},{key:"getAccount",value:function(e){this.setState({email:e})}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return Object(v.jsxs)("div",{className:"home",children:[Object(v.jsx)("h3",{children:"Log In"}),Object(v.jsx)("div",{className:"form",children:Object(v.jsxs)("form",{onSubmit:this.handleSubmit,children:["Email: ",Object(v.jsx)("input",{type:"text",name:"email",value:t,onChange:this.handleChange}),Object(v.jsx)("br",{}),"Password:",Object(v.jsx)("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),Object(v.jsx)("br",{}),Object(v.jsx)("button",{placeholder:"submit",type:"submit",children:"Log In"}),Object(v.jsx)("div",{children:Object(v.jsx)("p",{children:Object(v.jsxs)("small",{children:["Don't have an account? ",Object(v.jsx)(b.b,{to:"/signup",children:" Sign up"})]})})})]})}),Object(v.jsx)("div",{children:this.state.errors?this.handleErrors():null})]})}}]),a}(n.Component),T=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsx)("h3",{children:"Thank you for visiting!"})})}}]),a}(n.Component),z=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={username:"",email:""},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"home",children:["Your account",Object(v.jsxs)("div",{className:"account",children:[Object(v.jsxs)("p",{children:["Name: ",Object(v.jsx)("small",{children:this.props.user&&this.props.user.username})]}),Object(v.jsxs)("p",{children:["Email: ",Object(v.jsxs)("small",{children:[" ",this.props.user&&this.props.user.email]})]}),Object(v.jsx)("p",{children:"Saved characters:"}),Object(v.jsx)("div",{})]})]})}}]),a}(n.Component),B=a(9),F=Object(B.a)(),q=(a(73),function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getInfo=function(e){n.setState({name:e})},n.handleClick=function(){j.a.delete("https://rpg-generator-backend.herokuapp.com/logout",{withCredentials:!0}).then((function(e){n.handleLogout(),n.history.push("/")})).catch((function(e){return console.log(e)}))},n.loginStatus=function(){j.a.get("https://rpg-generator-backend.herokuapp.com/logged_in",{withCredentials:!0}).then((function(e){e.data.logged_in?n.handleLogin(e):n.handleLogout()})).catch((function(e){return console.log("api errors:",e)}))},n.handleLogin=function(e){n.setState({isLoggedIn:!0,user:e.user})},n.handleLogout=function(){n.setState({isLoggedIn:!1,user:{}})},n.state={isLoggedIn:!1,user:{},name:"",class:"",catchphrase:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loginStatus()}},{key:"render",value:function(){var e=this;return Object(v.jsx)("div",{children:Object(v.jsxs)(b.a,{history:F,children:[Object(v.jsx)("nav",{children:Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{children:Object(v.jsx)(b.b,{to:"/",children:" Home |"})}),Object(v.jsx)("li",{children:this.state.isLoggedIn?Object(v.jsx)(b.b,{to:"/create",children:"Create |"}):null}),Object(v.jsx)("li",{children:this.state.isLoggedIn?null:Object(v.jsx)(b.b,{to:"/signup",children:"Sign up |"})}),Object(v.jsx)("li",{children:this.state.isLoggedIn?null:Object(v.jsx)(b.b,{to:"/login",children:"Log in"})}),Object(v.jsx)("li",{children:this.state.isLoggedIn?Object(v.jsx)(b.b,{to:"/logout",onClick:this.handleClick,children:"Log Out"}):null})]})}),Object(v.jsx)("div",{className:"title",children:Object(v.jsx)("h2",{children:Object(v.jsx)(b.b,{to:"/",children:"RPG Character Creator"})})}),Object(v.jsxs)(g.c,{children:[Object(v.jsx)(g.a,{exact:!0,path:"/",render:function(t){return Object(v.jsx)(y,Object(i.a)(Object(i.a)({},t),{},{handleLogout:e.handleLogout,loggedInStatus:e.state.isLoggedIn}))}}),this.state.isLoggedIn&&Object(v.jsx)(g.a,{exact:!0,path:"/enter",component:function(t){return Object(v.jsx)(S,Object(i.a)(Object(i.a)({},t),{},{getInfo:e.getInfo}))}}),Object(v.jsx)(g.a,{path:"/create",children:Object(v.jsx)(C,{name:this.state.name,isLoggedIn:this.state.isLoggedIn})}),this.state.isLoggedIn&&Object(v.jsx)(g.a,{path:"/finished",children:Object(v.jsx)(D,{})}),this.state.isLoggedIn&&Object(v.jsx)(g.a,{path:"/account",children:Object(v.jsx)(z,{user:this.state.user})}),Object(v.jsx)(g.a,{exact:!0,path:"/signup",render:function(t){return Object(v.jsx)(P,Object(i.a)(Object(i.a)({},t),{},{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn}))}}),Object(v.jsx)(g.a,{exact:!0,path:"/login",render:function(t){return Object(v.jsx)(G,Object(i.a)(Object(i.a)({},t),{},{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn,getAccount:e.getAccount}))}}),Object(v.jsx)(g.a,{path:"/logout",children:Object(v.jsx)(T,{})})]})]})})}}]),a}(n.Component)),H=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,86)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};c.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(q,{})}),document.getElementById("root")),H()}},[[74,1,2]]]);
//# sourceMappingURL=main.3f1ac156.chunk.js.map